@using noochAdminNew.Classes.ModelClasses;
@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    DashboardDataClass dd = new DashboardDataClass();
    dd = Model;

    List<NoOfUsersInEachBank> BankUserCount = new List<NoOfUsersInEachBank>();
    BankUserCount = dd.UserCountInEachBank;

    List<MemberRecentLiveTransactionData> LiveTrans = new List<MemberRecentLiveTransactionData>();
    // LiveTrans = dd.RecentLiveTransaction;
}

<link href="~/css/plugins/morris/morris-0.4.3.min.css" rel="stylesheet" />
<link href="~/js/plugins/gritter/jquery.gritter.css" rel="stylesheet">
<!-- Data Tables CSS -->
<link href="~/css/plugins/dataTables/dataTables.bootstrap.css" rel="stylesheet">
<link href="~/css/plugins/dataTables/dataTables.responsive.css" rel="stylesheet">
<link href="~/css/plugins/dataTables/dataTables.tableTools.min.css" rel="stylesheet">

<div class="row wrapper border-bottom white-bg page-heading">
    <div class="col-lg-10">
        <h2>Dashboard</h2>
        <ol class="breadcrumb">
            <li>Dashboard</li>
            <li class="active">
                <strong>Home</strong>
            </li>
        </ol>
    </div>
</div>

<div id="dashboard-home" class="row wrapper wrapper-content">

    <div class="col-lg-9 nopad">

        <div class="panel" id="dash_UsersPanel">
            <div class="panel-heading">Users | <small>Summary</small></div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="widget blue-bg" id="totalUsersWidg">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-users fa-2x"></i>
                                </div>
                                <div class="col-xs-9 text-right">
                                    <span> Total Users </span>
                                    <h2 class="font-bold">@dd.TotalActiveUsers</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget navy-bg">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-mobile fa-2x"></i>
                                </div>
                                <div class="col-xs-9 text-right nopad">
                                    <span> w/ Verified Phone </span>
                                    <h2 class="font-bold">@dd.TotalVerifiedPhoneUsers</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget lazur-bg">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-at fa-2x"></i>
                                </div>
                                <div class="col-xs-9 text-right nopad">
                                    <span> w/ Verified Email</span>
                                    <h2 class="font-bold">@dd.TotalVerifiedEmailUsers</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget red-bg">
                            <div class="row">
                                <div class="col-xs-3">
                                    <i class="fa fa-institution fa-2x"></i>
                                </div>
                                <div class="col-xs-9 text-right nopad">
                                    <span> w/ Bank Account </span>
                                    <h2 class="font-bold">@dd.TotalActiveBankAccountUsers</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row">

                    <div class="col-lg-3">
                        <div class="ibox m-b-0">
                            <div class="ibox-title">
                                <h5>New Users:</h5>
                            </div>
                            <div class="ibox-content no-padding">

                                <ul class="list-group list-group-condensed clear-list">
                                    <li class="list-group-item">
                                        <span class="dateHoverToday">Today</span>
                                        <span class="pull-right text-navy">@dd.TotalNoOfActiveUser_Today</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="">This week</span>
                                        <span class="pull-right text-danger">@dd.TotalNoOfActiveUser_Week</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="dateHoverThisMonth">This month</span>
                                        <span class="pull-right text-navy">@dd.TotalNoOfActiveUser_Month</span>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="ibox m-b-0">
                            <div class="ibox-title">
                                <h5>New Verified Phones:</h5>
                            </div>
                            <div class="ibox-content no-padding">

                                <ul class="list-group list-group-condensed clear-list">
                                    <li class="list-group-item">
                                        <span class="dateHoverToday">Today</span>
                                        <span class="pull-right text-navy">@dd.TotalNoOfVerifiedPhoneUsers_Today</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="">This week</span>
                                        <span class="pull-right text-danger">@dd.TotalNoOfVerifiedPhoneUsers_Week</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="dateHoverThisMonth">This month</span>
                                        <span class="pull-right text-navy">@dd.TotalNoOfVerifiedPhoneUsers_Month</span>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="ibox m-b-0">
                            <div class="ibox-title">
                                <h5>New Verified Emails:</h5>
                            </div>
                            <div class="ibox-content no-padding">

                                <ul class="list-group list-group-condensed clear-list">
                                    <li class="list-group-item">
                                        <span class="dateHoverToday">Today</span>
                                        <span class="pull-right text-navy">
                                            @dd.TotalNoOfVerifiedEmailUsers_Today @*<span class=""><small><i class="fa fa-level-up"></i>28%</small></span>*@
                                        </span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="">This week</span>
                                        <span class="pull-right text-danger">@dd.TotalNoOfVerifiedEmailUsers_Week</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="dateHoverThisMonth">This month</span>
                                        <span class="pull-right text-navy">@dd.TotalNoOfVerifiedEmailUsers_Month</span>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="ibox m-b-0">
                            <div class="ibox-title">
                                <h5>New Banks:</h5>
                            </div>
                            <div class="ibox-content no-padding">

                                <ul class="list-group list-group-condensed clear-list">
                                    <li class="list-group-item">
                                        <span class="dateHoverToday">Today</span>
                                        <span class="pull-right text-navy">?</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="">This week</span>
                                        <span class="pull-right text-danger">20</span>
                                    </li>
                                    <li class="list-group-item">
                                        <span class="dateHoverThisMonth">This month</span>
                                        <span class="pull-right text-navy">55</span>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="panel" id="dash_TransPanel">
            <div class="panel-heading">Transactions | <small>Summary</small></div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-lg-3">
                        <div class="widget lazur-bg">
                            <div class="row">
                                <div class="col-xs-4">
                                    <i class="fa fa-money fa-2x"></i>
                                </div>
                                <div class="col-xs-8 text-right nopad">
                                    <span>Total Volume</span>
                                    @{
                                        double d = (Convert.ToDouble(dd.TotalAmountOfDollars));
                                        string transPerWeek = string.Format("{0:#,###0.00}", d);
                                        <h3 class="font-bold">$@transPerWeek</h3>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget navy-bg">
                            <div class="row">
                                <div class="col-xs-4">
                                    <i class="fa fa-check-circle fa-2x"></i>
                                </div>
                                <div class="col-xs-8 text-right nopad">
                                    <span>Transactions Completed</span>
                                    <h2 class="font-bold">@dd.TotalNoOfPaymentsCompleted</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget lazur-bg">
                            <div class="row">
                                <div class="col-xs-4">
                                    <i class="fa fa-reply fa-2x"></i>
                                </div>
                                <div class="col-xs-8 text-right nopad">
                                    <span>Total Requests</span>
                                    <h2 class="font-bold">@dd.totalRequestTypeTrans</h2>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-3">
                        <div class="widget red-bg">
                            <div class="row">
                                <div class="col-xs-4">
                                    <i class="fa fa-clock-o fa-2x"></i>
                                </div>
                                <div class="col-xs-8 text-right nopad">
                                    <span>Pending Requests</span>
                                    <h2 class="font-bold">@dd.TransactionsPendi</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>



        <div class="panel panel-default" id="dash_TransPanel2">
            <div class="panel-heading">Recent Transactions </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-xs-12 m-b-sm">
                        <div class="btn-group pull-right" data-toggle="buttons">
                            <label class="btn btn-white active" for="option1"> <input type="radio" name="options" id="option1" value="0"> Day </label>
                            <label class="btn btn-white" for="option2"> <input type="radio" name="options" id="option2" value="1"> Week </label>
                            <label class="btn btn-white" for="option3"> <input type="radio" name="options" id="option3" value="2"> Month </label>
                        </div>
                    </div>
                </div>

                <table class="table table-striped table-bordered table-hover" id="AllTrans">
                    <thead>
                        <tr>
                            <th>Trans ID</th>
                            <th>Type</th>
                            <th>Status</th>
                            <th>Date</th>
                            <th>Sender</th>
                            <th>Recipient</th>
                            <th>Amount</th>
                            <th>Location</th>
                           
                        </tr>
                    </thead>

                    <tbody id="TBOdy"></tbody>
                </table>

            </div>

        </div>

    </div>


    <div class="col-lg-3">


        <div class="ibox">
            <div class="ibox-title">
                <h5>User Status</h5>
                <div ibox-tools></div>
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div>
                        <canvas id="doughnutChart" height="140"></canvas>
                    </div>
                </div>
                <div class="row">
                    <div class="col-xs-12">
                        <ul class="list-group list-group-condensed clear-list m-t-10 m-b-0">
                            <li class="list-group-item">
                                <span class="">Registered</span>
                                <span class="pull-right font-bold">@dd.TotalActiveUsers</span>
                            </li>
                            <li class="list-group-item">
                                <span class="">Active</span>
                                <span class="pull-right font-bold">@dd.TotalActiveUsers</span> @*All Users w/ Status of "Active" or "Accepted"*@
                            </li>
                            <li class="list-group-item">
                                <span class="">Non-Registered</span>
                                <span class="pull-right font-bold">@dd.TotalVerifiedPhoneUsers</span> @*All Users w/ Status of "NonRegistered"*@
                            </li>
                            <li class="list-group-item">
                                <span class="">Deleted</span>
                                <span class="pull-right font-bold">@dd.TotalActiveBankAccountUsers</span> @*All Users w/ isDelete == true*@
                            </li>
                            <li class="list-group-item">
                                <span class="">Suspended</span>
                                <span class="pull-right font-bold">@dd.TotalActiveBankAccountUsers</span> @*All Users w/ Status of "Suspended" or "Temporary_blocked"*@
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
        </div>


        <div class="ibox" id="dash_TransPanel22">
            <div class="ibox-title">
                <h5>No. of Users Per Bank</h5>
            </div>
            <div class="ibox-content p-t-0">
                <div class="row">
                    <table class="table table-striped" id="AllTrans22">
                        <thead>
                            <tr>
                                <th>Bank</th>
                                <th style="padding:8px 2px;">No Of User</th>
                            </tr>
                        </thead>
                        <tbody id="bankstableBody">
                            @foreach (NoOfUsersInEachBank M in BankUserCount)
                            {
                                <tr class="gradeX">
                                    <td>@M.BankName</td>
                                    <td>@M.NoOfUsers</td>
                                </tr>
                            }
                        </tbody>

                    </table>

                </div>
            </div>

        </div>

        <div class="ibox">
            <div class="ibox-title">
                <h5>Transfer Data</h5>
            </div>
            <div class="ibox-content">
                <ul class="stat-list">
                    <li>
                        <h2 class="no-margins">2,346</h2>
                        <small>Total orders in period</small>
                        <div class="stat-percent">48% <i class="fa fa-level-up text-navy"></i></div>
                        <div class="progress progress-mini">
                            <div style="width: 48%;" class="progress-bar"></div>
                        </div>
                    </li>
                    <li>
                        <h2 class="no-margins ">4,422</h2>
                        <small>Orders in last month</small>
                        <div class="stat-percent">60% <i class="fa fa-level-down text-navy"></i></div>
                        <div class="progress progress-mini">
                            <div style="width: 60%;" class="progress-bar"></div>
                        </div>
                    </li>
                    <li>
                        <h2 class="no-margins ">9,180</h2>
                        <small>Monthly income from orders</small>
                        <div class="stat-percent">22% <i class="fa fa-bolt text-navy"></i></div>
                        <div class="progress progress-mini">
                            <div style="width: 22%;" class="progress-bar"></div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div id="TransData" style="display:block">@dd.TransData</div>

</div>

<script type="text/javascript">
    function showLocationModal(lati, longi, stte)
    {
        var v = 'https://www.google.com/maps/embed/v1/place?q=' + lati + ',' + longi + '&center=' + lati + ',' + longi + '&key=AIzaSyDrUnX1gGpPL9fWmsWfhOxIDIy3t7YjcEY&zoom=13';
        $('#googleFrame').attr('src', v);

        $("#citystate").text(stte);

        $('#modal-transferLocation').modal();
        return false;
    }
</script>

<div class="modal fade" id="modal-transferLocation" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><span class="fa fa-map-marker pull-left"></span>Transfer Location</h4>
            </div>
            <div class="modal-body">
                <p style="font-size:16px;text-align:center;" class="m-b-sm">This transfer was sent from: <strong><span id="citystate"></span></strong>.</p>
                <iframe width="100%" id="googleFrame"
                        height="420"
                        frameborder="0"
                        style="border:0;margin:10px auto 0;"
                        src=''></iframe>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- ChartJS-->
<script src="~/js/plugins/chartJs/Chart.min.js"></script>
<script src="~/scripts/app/dashboardlivetransaction.js"></script>

<!-- Data Tables JS-->
<script src="~/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="~/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="~/js/plugins/dataTables/dataTables.responsive.js"></script>
<script src="~/js/plugins/dataTables/dataTables.tableTools.min.js"></script>
